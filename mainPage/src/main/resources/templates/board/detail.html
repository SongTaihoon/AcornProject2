<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>후기 상세</title>
<link rel="stylesheet" href="/public/css/board/detail.css">
<script th:src="@{/public/js/board/detail.js}" defer></script>
</head>
<body>
<header th:insert="/NewHeader"></header>
<div id="wrapper">
	<main class="container-xl">
		<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" id="path">
		  <ol class="breadcrumb">
		    <li class="breadcrumb-item">
		    	<a href="/">홈</a>
		    </li>
		    <li class="breadcrumb-item">
		    	<a href="#">게시판</a>
		    </li>
		    <li class="breadcrumb-item" aria-current="page">
		    	<a href="/board/list/1" class="breadcrumb-item active">후기</a>
		    </li>
		  </ol>
		</nav>
		 <h1 class="pb-4 d-flex justify-content-between align-items-center" 
		    style="border-bottom: 1px solid #e8e8e8; min-width: 1200px;">
		    <span style="font-size: 35px;" th:text="${board.title}"></span>
	    </h1>	
		<div class="mt-3 d-flex">
			<div class="d-flex align-items-center">
				<i class="bi bi-eye" style="margin-right: 4px;"
					data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="조회수">
					<span th:text="${board.views}"></span>
				</i>
				<a style="margin-right: 4px; margin-left: 4px;"
			 	data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="좋아요!"
				th:href="@{/board/prefer/{no}/{prefer}(no=${board.board_no},prefer=${true})}" 
				class="btn btn-outline-primary border-0 rounded-pill">
					<i th:classappend="${(board.prefer_active!=null && board.prefer_active)?'bi-hand-thumbs-up-fill':'bi-hand-thumbs-up'}" class="bi "></i>				
					<span th:text="${board.good}"></span>
				</a> 
				<a style="margin-right: 8px;"
			 	data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="싫어요!"
				th:href="@{/board/prefer/{no}/{prefer}(no=${board.board_no},prefer=${false})}"  
				class="btn btn-outline-danger border-0 rounded-pill">
					<i th:classappend="${(board.prefer_active!=null && !board.prefer_active)?'bi-hand-thumbs-down-fill':'bi-hand-thumbs-down'}" class="bi "></i>				
					 <span th:text="${board.bad}"></span>
				</a>
			</div>
	  </div>
	  <div class="mt-3">
	 	<table class="table table-bordered table">
		  <tbody>
		    <tr>
		      <th style="width: 100px; border-left: none;" class="bg-light align-middle">작성자</th>
		      <td style="width: 900px;">
		      	<input name="userId" class="form-control" id="userId" th:value="${board.users.userid}" readonly>
		      </td>
		      <td style="width: 300px; border-right: none;" rowspan="5">
		      	<div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel" style="width: 300px; height: 300px;">
				  <div class="carousel-inner">
				    <div class="carousel-item active">
				      <img src="/img/knit.jpg" class="d-block w-100" alt="...">
				    </div>
				    <div class="carousel-item">
				      <img src="/img/hat.jpg" class="d-block w-100" alt="...">
				    </div>
				    <div class="carousel-item">
				      <img src="/img/dress.jpg" class="d-block w-100" alt="...">
				    </div>
				  </div>
				  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
				    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
				    <span class="visually-hidden">Previous</span>
				  </button>
				  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
				    <span class="carousel-control-next-icon" aria-hidden="true"></span>
				    <span class="visually-hidden">Next</span>
				  </button>
				</div>
<<<<<<< HEAD
<<<<<<< HEAD
				<!--  
				<th:block th:if="${board.img_path!=null}">
		      	  <img alt="이미지" class="img-thumbnail" style="width:300px; height:300px; object-fit: cover;"
		      	 	   th:src="@{/public/img/{file}(file=${reply.img_path})}">
		        </th:block>
		        -->
=======
>>>>>>> origin/준성
=======
>>>>>>> origin/준성
		      </td>
		    </tr>
		    <tr>
		      <th style="width: 100px; border-left: none;" class="bg-light align-middle">카테고리</th>
		      <td style="width: 600px;">
		      	<select name="category" class="form-select" id="category">
					<option></option>
					<option></option>
					<option></option>
					<option></option>
					<option></option>
				</select>
		      </td>
		    </tr>
		    <tr>
		      <th style="width: 100px; border-left: none;" class="bg-light align-middle">장소명</th>
		      <td style="width: 600px;">
		      	<input name="userId" class="form-control" id="userId" th:value="${board.users.userid}" onkeyup="noSpace(this)" onchange="noSpace(this)">
		      </td>
		    </tr>
		    <tr>
		      <th style="width: 100px; border-left: none;" class="bg-light align-middle">별점</th>
		      <td style="width: 600px;">
		      	<select name="rating" class="form-select" id="rating">
					<option value="0.0">0.0</option>
					<option value="0.5">0.5</option>
					<option value="1.0">1.0</option>
					<option value="1.5">1.5</option>
					<option value="2.0">2.0</option>
					<option value="2.5">2.5</option>
					<option value="3.0">3.0</option>
					<option value="3.5">3.5</option>
					<option value="4.0">4.0</option>
					<option value="4.5">4.5</option>
					<option value="5.0">5.0</option>
				</select>
		      </td>
		    </tr>
		    <tr>
		      <th style="width: 100px; border-left: none;" class="bg-light align-middle">내용</th>
		      <td style="width: 600px;">
		      	<textarea name="contents" class="form-control" style="height: 150px;" th:text="${board.contents}" onkeyup="noSpace(this)" onchange="noSpace(this)" readonly></textarea>
		      </td>
		    </tr>
		  </tbody>
		</table>
	  </div>	
	  <div class="d-flex mt-3 mb-3">
		<th:block th:if="${session.loginUsers?.userid==board.users.userid}">
			<div th:if="${session.loginUsers?.userid==board.users.userid}">
				<a th:href="@{/board/update/{no}(no=${board.board_no})}" class="btn btn-outline-success btn-lg p-2" style="margin-right: 8px;">
					수정
				</a>
				<a th:href="@{/board/delete/{boardNo}/{userId}(boardNo=${board.board_no},userId=${board.users.userid})}" class="btn btn-outline-danger btn-lg p-2">
					삭제
				</a>
			</div>
		</th:block>
				<a href="/board/list/1" class="btn btn-outline-info btn-lg ms-auto p-2">목록</a>
	  </div>
	  	<h1 class="pb-4 d-flex justify-content-between align-items-center" 
		    style="border-bottom: 1px solid #e8e8e8; min-width: 1200px;">
		    <span style="font-size: 35px;">댓글 리스트 : <strong th:text="${board.replys?.size}"></strong></span>
		    <button class="btn btn-lg btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#replyCollapse">
    			토글
  			</button>
	    </h1>
		<div class="mt-3">
			<ul class="list-group collapse show mt-3" id="replyCollapse">
				<li class="list-group-item" 
				th:if="${session.loginUsers!=null}">
					<p style="font-size: 30px; margin-top: 8px;">댓글 등록</p>
<!--///////////////////////////////////// 리플 등록 폼 ///////////////////////////////////////////////////////////////// -->				
					<form action="/reply/insert.do" method="post" enctype="multipart/form-data">
						<table class="table table-bordered table align-middle mb-3" style="height: 100%;">
							<tbody>
								<tr>
									<th class="table-light">작성자</th>
									<td>
										<input name="userId" class="form-control" id="userId" th:value="${session.loginUsers?.userid}" readonly>
									</td>
								</tr>
								<tr>
									<th class="table-light">제목</th>
									<td>
										<input name="title" class="form-control" id="title" onkeyup="noSpace(this);" onchange="noSpace(this);" required>
									</td>
								</tr>
								<tr>
									<th class="table-light">사진</th>
									<td>
										<input name="imgFiles" class="form-control mb-1 form-control-lg" type="file">
									</td>
								</tr>
								<tr>
									<th class="table-light">내용</th>
									<td>
										<textarea name="contents" class="form-control" id="inputContents" required></textarea>
									</td>	
								</tr>
							</tbody>
						</table>
						<div id="button" class="mb-2">
							<button class="btn btn-outline-warning btn-lg" type="reset">초기화</button>
							<button class="btn btn-outline-primary btn-lg" type="submit" style="margin-right: 16px;">등록</button>
						</div>
					</form>
				</li>
				<th:block th:insert="/board/replyList" th:with="replys=${board.replys}" id="replyList"></th:block>
			</ul>
		</div>
	</main>	
	 <footer class="footer" th:insert="/NewFooter"></footer> 
	</div>
</body>
<script type="text/javascript">
const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
function noSpace(obj) { // 공백사용못하게
    var str = /\s/;  // 공백체크
    if(str.exec(obj.value.trim)) { //공백 체크
        //alert("해당 항목에는 첫 글자 공백을 사용할수 없습니다.");
        obj.focus();
        obj.value = obj.value.replace(/^ +/,''); // 공백제거
        return false;
    }
}
</script>
</html>