<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>회원 수정</title>
<link rel="stylesheet" href="/public/css/user/detail.css">
<script src="/public/js/user/update.js" defer="defer"></script>
<!-- 주소API기능연동 -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js" defer="defer"></script>
<script th:src="@{/public/js/user/adressApi.js}" defer="defer"></script>
</head>
<body>
<header th:insert="/NewHeader"></header>
<div id="wrapper">
	 <main class="container-xl">
	   <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" id="path">
		  <ol class="breadcrumb">
		    <li class="breadcrumb-item">
		    	<a href="/">홈</a>
		    </li>
		    <li class="breadcrumb-item" aria-current="page">
		    	<a th:href="@{/user/detail/{userId}(userId=${user?.user_id})}" 
		    	   class="breadcrumb-item active" th:text="${user?.user_name} + '(' + ${user?.user_id} + ')'"></a>
		    </li>
		  </ol>
		</nav>
	    <h1 class="pb-4 d-flex justify-content-between align-items-center" 
		    style="border-bottom: 1px solid #e8e8e8; min-width: 1200px;">
		    <span style="font-size: 35px;">회원 수정</span>
	    </h1>	
		<form action="/user/update.do" method="post">
			<div class="mt-3 d-flex align-self-center">
				<div class="ms-auto">
					<span th:text="'가입일 : ' + ${#dates.format(user?.signup, 'yyyy-MM-dd HH:mm:ss')}"></span>
				</div>
			</div>
			<table class="mt-3 mb-5 table align-middle table-bordered">
				<tbody>
					<tr>
						<th class="table-light">이름</th>
						<td>
							<input name="user_name" id="username" class="form-control" type="text" th:value="${user?.user_name}" 
								   onkeyup="noSpaceForm(this)" onchange="noSpaceForm(this)" maxlength="20">
						</td>
					</tr>
					<tr>
						<th class="table-light">아이디</th>
						<td>
							<input name="user_id" type="text" class="form-control" th:value="${user?.user_id}" readonly maxlength="20">
						</td>
					</tr>
					<tr>
						<th class="table-light">비밀번호</th>
						<td>
							<input name="user_pw" id="userpw" class="form-control" type="text" th:value="${user?.user_pw}" 
								   onkeyup="noSpaceForm(this)" onchange="noSpaceForm(this)" maxlength="16">
						</td>
					</tr>
					<tr>
						<th class="table-light">이메일</th>
						<td>
							<input name="user_email" id="email" class="form-control" type="email" th:value="${user?.user_email}" 
								   onkeyup="noSpaceForm(this)" onchange="noSpaceForm(this)">
						</td>
					</tr>
					<tr>
						<th class="table-light">전화번호</th>
						<td>
							<input name="user_phone" id="phone" class="form-control" type="tel" th:value="${user?.user_phone}" 
							       onkeydown="noSpaceForm(this)" onchange="noSpaceForm(this)" 
							       oninput="phoneAutoComplete(this)" onKeyup="this.value=this.value.replace(/[^-0-9]/g,'');" maxlength="13">
						</td>
					</tr>
					<tr>
						<th class="table-light">생일</th>
						<td>
							<input name="birth" id="birth" class="form-control" type="date" 
								   th:value="${#dates.format(user?.birth, 'yyyy-MM-dd')}">
						</td>
					</tr>
					<tr>
						<th class="table-light">우편번호</th>
						<td style="text-align: left;">
						<div class="d-flex align-items-center">
							<input name="add1" id="sample6_postcode" type="text" th:value="${user?.add1}" 
							class="form-control" style="display:inline; width:85%; margin-right: 8px;" readonly>
							<input type="button" class="btn btn-secondary" onclick="sample6_execDaumPostcode()" 
								   value="우편번호 찾기" style="display:inline; width:15%;">
							</div>
						</td>
					</tr>
					<tr>
						<th class="table-light">주소</th>
						<td>
							<input name="add2" id="sample6_address" type="text" size="40" 
								   th:value="${user?.add2}" class="form-control" readonly>
						</td>	
					</tr>
					<tr>
						<th class="table-light">상세 주소</th>
						<td>
							<input name="add3" id="sample6_detailAddress" type="text" size="40" 
								   th:value="${user?.add3}" class="form-control"
								   onkeyup="noSpace(this)" onchange="noSpace(this)">
						</td>	
					</tr>
					<tr>
						<th class="table-light">참고 항목</th>
						<td>
							<input name="add4" id="sample6_extraAddress" type="text" size="40" 
								   th:value="${user?.add4}" class="form-control" readonly>
						</td>	
					</tr>
				</tbody>
			</table>
			<div class="d-flex mb-3 g-3">
				<div class="ms-auto">
					<button type="reset" class="btn btn-outline-warning btn-lg">초기화</button>
					<button type="submit" class="btn btn-outline-success btn-lg" style="margin-left: 8px; margin-right: 8px;">수정</button>
					<div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
					  <div class="modal-dialog modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header border-0">
					        <h1 class="modal-title fs-5" id="exampleModalToggleLabel">경고</h1>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					      </div>
					      <div class="modal-body">
					        삭제하시겠습니까?
					      </div>
					      <div class="modal-footer border-0">
					        <button type="button" class="btn btn-outline-primary btn-lg" data-bs-target="#exampleModalToggle2" 
					        		data-bs-toggle="modal" style="margin-right: 8px;">예</button>
					      	<button type="button" class="btn btn-outline-dark btn-lg" data-bs-dismiss="modal">아니오</button>
					      </div>
					    </div>
					  </div>
					</div>
					<div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
					  <div class="modal-dialog modal-dialog">
					    <div class="modal-content">
					      <div class="modal-header border-0">
					        <h1 class="modal-title fs-5" id="exampleModalToggleLabel2">경고</h1>
					        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					      </div>
					      <div class="modal-body">
					        삭제 시 회원의 모든 정보가 삭제되며 복구할 수 없습니다. 그래도 삭제하시겠습니까?
					      </div>
					      <div class="modal-footer border-0">
					        <button type="button" class="btn btn-outline-dark btn-lg" data-bs-dismiss="modal" style="margin-right: 8px;">취소</button>
					        <a class="btn btn-outline-danger btn-lg" th:href="@{/user/delete/{userId}(userId=${user?.user_id})}">삭제</a>
					      </div>
					    </div>
					  </div>
					</div>
					<a class="btn btn-outline-danger btn-lg" data-bs-toggle="modal" 
					   href="#exampleModalToggle" role="button" style="margin-right: 8px;">삭제</a>
					<a class="btn btn-outline-dark btn-lg" th:href="@{/user/detail/{userId}(userId=${user?.user_id})}">취소</a>
				</div>
			</div>
		</form>
	  </main>
<footer class="footer" th:insert="/NewFooter"></footer>
</div>
</body>
</html>